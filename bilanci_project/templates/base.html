{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{% block title %}open_bilanci{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- This file store project specific CSS -->
    <link href="{% static 'css/project.css' %}" rel="stylesheet">

    <!-- Use this to quickly test CSS changes in a template,
        then move to project.css -->
    {% block extra_css %}{% endblock extra_css %}
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">open_bilanci</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>

            <li>
              {#            disable the form submit when pressing enter #}
                <script type='text/javascript'>
                    var oktosubmit = false;
                </script>
                <form method="get" action="" class="navbar-search form-search pull-left" onsubmit="return oktosubmit;">
                    <section  class="ui-widget">
                        <input type="text"
                               class="search-query "
                               id="comune-search"
                               placeholder="Cerca tra i Comuni" />
                    </section>
                </form>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

      <h1>{% block page_title %}Open bilanci home page{% endblock page_title %}</h1>

      {% block content %}

        <p>home page content</p>

      {% endblock content %}



    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    <!-- place project specific Javascript in this file -->
    <script src="{% static 'js/project.js' %}"></script>




    <script type="text/javascript">
    //       names of hidden inputs for donation
    
    $(document).ready(function() {

        $('#comune-search').focus(function(){
            if ($(this)._cleared) return;
            $(this).val('');
            $(this)._cleared = true;
        });


        $( "#comune-search" ).autocomplete({
            source: function( request, response ) {
                $.getJSON(
                       "{{ SITE_URL }}/comuni.json",
                        {'qterm': request.term },
                        function( data ) {
                            response( $.map( data, function( item ) {
                                return {
                                    label: item.fields.denominazione,
                                    value: item.fields.slug
                                }
                            }));
                        }
                );
            },
            minLength: 4,
            select: function( event, ui ) {
                window.location.href = "../comune/"+ ui.item.value;
            },
            open: function() {
               $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        }).css('z-index', 10000);



    });

    </script>



    {% block extra_js %}{% endblock extra_js %}
  </body>
</html>
