{%  extends "base.html" %}
{% load confronti_helpbox %}
{% load confronti_parameter_list %}

{% block page_title %}
    Confronto Comune {{ territorio_1.denominazione }} con {{ territorio_2.denominazione }}
{% endblock %}


{% block content_title %}
    Confronto Comune {{ territorio_1.denominazione }} con {{ territorio_2.denominazione }}
{% endblock %}


{% block content %}

    <div class="panel-heading">
        <a href="#" class="pull-right share">Condividi <span class="icon sprite-share"></span></a>
        <h1 class="panel-title">CONFRONTI</h1>
    </div>

    <div class="panel-body">
        {% block confronti_parameter_menu_toggle %}
            <div class="row">
                <div class="col-sm-4">
                    <a href="#" id="toggle-menu" role="button">
                        <span class="icon sprite-toggle-menu"></span>
                    </a>
                </div>
            </div>
        {% endblock %}
        <hr class="no-border">

        <div class="row">
            <div id="content" class="col-sm-12">
                <div id="comparison" class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-5">
                                <div class="form-group">

                                    <label for="">CONFRONTA</label>
                                    {{ territori_comparison_search_form.territorio_1 }}
                                    {% if territorio_1 %}
                                        {% confronti_helpbox territorio_1 contesto_1 %}
                                    {% endif %}
                                 </div>
                            </div>
                            <div class="col-sm-5">
                                <div class="form-group">

                                    <label for="">CON</label>
                                    {{ territori_comparison_search_form.territorio_2 }}
                                    {% if territorio_2 %}
                                        {% confronti_helpbox territorio_2  contesto_2 %}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="">&nbsp;</label><br>
                                    <a href="" class="btn btn-link" id="confronti_submit_btn">
                                        <span class="icon sprite-submit"></span>
                                    </a>
                                </div>
                            </div>
                            {#       error message box #}
                            <div class="col-sm-12 hidden" id="error_msg_box">
                                <p id="log" class="error">
                                    <span class="icon sprite-status"></span><span id="error_msg_box_txt"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div> <!-- /panel panel-default -->

                {% if territorio_1 and territorio_2 %}
                    <div id="results" class="row">
                        <div class="col-md-12">
                            <div class="panel panel-default panel-nobg">
                                <div class="panel-heading clearfix">
                                    <h3 class="panel-title">{{ indicator_type }}</h3>
                                    <p> {{ indicator_type }}<span class="sep">â€º</span> {{ indicator.denominazione|upper }}</p>
                                </div>
                                <div class="panel-body">
                                    <div class="comparison-graph">
                                        {% include 'commons/_lines_chart_over_the_years.html' %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><!-- /#results -->
                {% endif %}
            </div>
            {# comparison list menu  #}
            {% block confronti_parameter_menu %}
                <aside id="sidebar" class="hidden">
                    {% confronti_parameter_list 'indicatori' indicator_list  %}
                    {% confronti_parameter_list 'entrate' entrate_list %}
                    {% confronti_parameter_list 'spese' spese_list  %}

                </aside>
            {% endblock %}
        </div> <!-- ./row -->


    </div><!-- /.panel-body -->
{% endblock %}

{% block extra_js %}

    <script type="text/javascript">


        $(document).ready(function(){

            {# opens by default the indicator menu on page load #}
            var $sidebar = $( '#sidebar' ),
                $content = $( '#content' );


            var clss = {
                btn: {
                    on: 'active'
                },
                content: {
                    on: 'col-sm-12',
                    off: 'col-sm-8 col-sm-push-4'
                },
                sidebar: {
                    on: 'col-sm-4 col-sm-pull-8',
                    off: 'hidden'
                }
            };

            $sidebar
                .removeClass( clss.sidebar.off )
                .addClass( clss.sidebar.on );
            $content
                .removeClass( clss.content.on )
                .addClass( clss.content.off );
            $( '#toggle-menu' ).addClass( clss.btn.on );
        });


    </script>

{% endblock %}